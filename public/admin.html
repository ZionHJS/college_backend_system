<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- 引入easyui的css和js -->
    <link rel="stylesheet" href="./lib/jquery-easyui-1.8.5/themes/bootstrap/easyui.css">
    <link rel="stylesheet" href="./lib/jquery-easyui-1.8.5/themes/icon.css">

    <!-- jQuery -->
    <script src="./lib/jquery-easyui-1.8.5/jquery.min.js"></script>
    <!-- easyui的全部脚本 -->
    <script src="./lib/jquery-easyui-1.8.5/jquery.easyui.min.js"></script>
    <!-- 语言包 -->
    <script src="./lib/jquery-easyui-1.8.5/locale/easyui-lang-zh_CN.js"></script>
    <!-- 引入js-cookie -->
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
    <!-- 引入ajaxsetup.js这个文件来控制没有cookie时候的登录状况 -->
    <script src="./js/ajaxsetup.js"></script>
    <!-- 引入样式 -->
    <link rel="stylesheet" href="./style/admin.css">
    <!-- 引入art-template模版 -->
    <script src="./lib/template-web.js"></script>
    <title>AdminPage</title>
</head>

<body>
    <div id="cc" class="easyui-layout" data-options="fit:true">
        <div data-options="region:'north',iconCls:'icon-ok', collapsible:false"
            style="height:75px; vertical-align: middle;">
            <h1>BackEnd Management System</h1>
        </div>

        <!-- right-side Nav-Region -->
        <div data-options="region:'west',title:'West',split:false" style="width:200px;">
            <div id="aa" class="easyui-accordion" data-options="fit:true" style="width:300px;height:200px;">
                <div title="resource-management" data-options="iconCls:'icon-save'"
                    style="overflow:auto; padding:10px;">
                    <div class="div-box"><a href="#">Question-Management</a></div>
                    <div class="div-box"><a href="#">Knowledge-Management</a></div>
                    <div class="div-box"><a href="#">Material-Management</a></div>
                    <div class="div-box"><a href="#">Course-Management</a></div>
                    <div class="div-box"><a href="#">Practice-Management</a></div>
                </div>
                <div title="resource-management" data-options="iconCls:'icon-save'"
                    style="overflow:auto; padding:10px;">
                    <div class="div-box"><a href="#">Question-Management</a></div>
                    <div class="div-box"><a href="#">Knowledge-Management</a></div>
                    <div class="div-box"><a href="#">Material-Management</a></div>
                    <div class="div-box"><a href="#">Course-Management</a></div>
                    <div class="div-box"><a href="#">Practice-Management</a></div>
                </div>
            </div>
        </div>

        <!-- center Content-Region -->
        <div data-options="region:'center'" style="padding:5px;background:#eee;">
            <!-- tab导航区域tt -->
            <div id="tt" data-options="fit:true" class="easyui-tabs">
            </div>
        </div>
    </div>

    <script>
        $(function () {
            initMenu();
        });

        function initMenu() {
            //#region 第一步 加载后台的数据 menu 并且根据数据动态生成左侧的菜单栏
            $.ajax({
                url: '/api/site_nav',
                data: '',
                type: 'GET',
                dataType: 'json',
            }).done(function (resData, status, xhr) {
                //ajax请求成功之后执行done里面的方法
                for (var i = 0; i < resData.data.length; i++) {
                    var childHtml = [];
                    var childLength = resData.data[i].children.length;
                    for (var j = 0; j < childLength; j++) {
                        var t = resData.data[i].children[j];
                        childHtml.push('<p><a iconcls="' + t.iconCls + '" class="menu_link" href="javascript:" url="' + t.url + '">' + t.title + '</a></p>');
                    }
                    //动态添加 aa panel 
                    $('#aa').accordion('add', {
                        title: resData.data[i].title,
                        iconCls: resData.data[i].iconCls,
                        content: childHtml.join(''),
                        selected: false
                    });
                    //动态创建子 菜单p标签
                }
            });
    </script>
</body>

</html>